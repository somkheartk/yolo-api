# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ Deploy YOLO API ‡∏ö‡∏ô Digital Ocean

‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£ deploy YOLO Object Detection API ‡∏ö‡∏ô Digital Ocean ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

## ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)
2. [‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô](#‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô)
3. [‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Droplet](#‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á-droplet)
4. [‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Server ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô](#‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤-server-‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô)
5. [‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker](#‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á-docker)
6. [‡∏Å‡∏≤‡∏£ Deploy Application](#‡∏Å‡∏≤‡∏£-deploy-application)
7. [‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Domain ‡πÅ‡∏•‡∏∞ SSL](#‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤-domain-‡πÅ‡∏•‡∏∞-ssl)
8. [‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Nginx Reverse Proxy](#‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤-nginx-reverse-proxy)
9. [‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firewall](#‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤-firewall)
10. [Monitoring ‡πÅ‡∏•‡∏∞ Logging](#monitoring-‡πÅ‡∏•‡∏∞-logging)
11. [Backup ‡πÅ‡∏•‡∏∞ Recovery](#backup-‡πÅ‡∏•‡∏∞-recovery)
12. [Performance Tuning](#performance-tuning)
13. [Troubleshooting](#troubleshooting)

---

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

Digital Ocean ‡πÄ‡∏õ‡πá‡∏ô cloud provider ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ deploy API ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:
- üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏û‡∏á ($4-6/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)
- üöÄ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏á‡πà‡∏≤‡∏¢ straightforward
- üìä ‡∏°‡∏µ monitoring tools
- üîÑ Scale ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢
- üìç ‡∏°‡∏µ data centers ‡πÉ‡∏ô‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢

### ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°

```
Internet
    ‚Üì
Domain (yourdomain.com)
    ‚Üì
SSL Certificate (Let's Encrypt)
    ‚Üì
Nginx (Reverse Proxy)
    ‚Üì
Docker Container (YOLO API)
    ‚Üì
YOLOv8 Model
```

---

## ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô

### 1. ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Digital Ocean
- ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ó‡∏µ‡πà https://www.digitalocean.com
- ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° payment method

### 2. Domain Name (Optional ‡πÅ‡∏ï‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
- ‡∏ã‡∏∑‡πâ‡∏≠ domain ‡∏à‡∏≤‡∏Å registrar (Namecheap, GoDaddy, etc.)
- ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ IP address ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

### 3. ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå .pt model ‡∏ó‡∏µ‡πà train ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
- ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡πÉ‡∏ä‡πâ pretrained model ‡∏Å‡πá‡πÑ‡∏î‡πâ

---

## ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Droplet

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á Droplet

1. **Login ‡πÄ‡∏Ç‡πâ‡∏≤ Digital Ocean Console**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://cloud.digitalocean.com

2. **Create > Droplets**

3. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Image:**
   - **Recommended**: Ubuntu 22.04 (LTS) x64

4. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î Droplet:**

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development/Testing:**
```
Basic Plan
CPU: 1 vCPU
RAM: 2 GB
Storage: 50 GB SSD
Transfer: 2 TB
‡∏£‡∏≤‡∏Ñ‡∏≤: $12/month (‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà digitalocean.com)
```

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥):**
```
Basic Plan
CPU: 2 vCPUs
RAM: 4 GB
Storage: 80 GB SSD
Transfer: 4 TB
‡∏£‡∏≤‡∏Ñ‡∏≤: $24/month (‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà digitalocean.com)
```

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö High Traffic:**
```
CPU-Optimized
CPU: 4 vCPUs
RAM: 8 GB
Storage: 100 GB SSD
‡∏£‡∏≤‡∏Ñ‡∏≤: $48/month (‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà digitalocean.com)
```

5. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Data Center Region:**
   - Singapore (SGP1) - ‡πÉ‡∏Å‡∏•‡πâ‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
   - ‡∏´‡∏£‡∏∑‡∏≠ Frankfurt (FRA1) - ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏á

6. **Authentication:**
   - **SSH Key** (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥): ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î public SSH key
   - ‡∏´‡∏£‡∏∑‡∏≠ **Password**: ‡∏ï‡∏±‡πâ‡∏á root password

7. **Additional Options:**
   - ‚úÖ Enable **Monitoring** (free)
   - ‚úÖ Enable **IPv6**
   - ‚ùå ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Backups** ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ (‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° 20%)

8. **Hostname:**
   - ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô `yolo-api-prod`

9. **Create Droplet**

‡∏£‡∏≠ 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ droplet ‡∏à‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:
- IP Address (‡πÄ‡∏ä‡πà‡∏ô 159.89.xxx.xxx)
- Root password (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ SSH key)

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Server ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Server

**‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ SSH Key:**
```bash
ssh root@YOUR_DROPLET_IP
```

**‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Password:**
```bash
ssh root@YOUR_DROPLET_IP
# ‡πÉ‡∏™‡πà password ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏≤‡∏á email
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Update System

```bash
# Update package lists
apt update

# Upgrade all packages
apt upgrade -y

# Install essential tools
apt install -y curl wget git vim ufw
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á User ‡πÉ‡∏´‡∏°‡πà (Security Best Practice)

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á user ‡πÉ‡∏´‡∏°‡πà
adduser yoloapi

# ‡πÄ‡∏û‡∏¥‡πà‡∏° user ‡πÄ‡∏Ç‡πâ‡∏≤ sudo group
usermod -aG sudo yoloapi

# ‡πÄ‡∏û‡∏¥‡πà‡∏° user ‡πÄ‡∏Ç‡πâ‡∏≤ docker group (‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á docker ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ)
usermod -aG docker yoloapi
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SSH ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö User ‡πÉ‡∏´‡∏°‡πà

```bash
# Copy SSH keys ‡∏à‡∏≤‡∏Å root ‡πÑ‡∏õ‡∏¢‡∏±‡∏á user ‡πÉ‡∏´‡∏°‡πà
rsync --archive --chown=yoloapi:yoloapi ~/.ssh /home/yoloapi
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: Configure SSH (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)

```bash
# Edit SSH config
vim /etc/ssh/sshd_config
```

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:
```
# ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£ login ‡∏î‡πâ‡∏ß‡∏¢ root
PermitRootLogin no

# ‡πÉ‡∏ä‡πâ SSH key ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ SSH key)
PasswordAuthentication no

# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô default port (optional ‡πÅ‡∏ï‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
Port 2222

# Allow specific user
AllowUsers yoloapi
```

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞ restart SSH:
```bash
systemctl restart ssh
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á login ‡∏î‡πâ‡∏ß‡∏¢:
```bash
ssh -p 2222 yoloapi@YOUR_DROPLET_IP
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Swap (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö server ‡∏ó‡∏µ‡πà‡∏°‡∏µ RAM ‡∏ô‡πâ‡∏≠‡∏¢)

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á swap file 2GB
fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile

# ‡∏ó‡∏≥‡πÉ‡∏´‡πâ swap persistent
echo '/swapfile none swap sw 0 0' | tee -a /etc/fstab

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
free -h
```

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker

```bash
# ‡πÄ‡∏û‡∏¥‡πà‡∏° Docker's official GPG key
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# ‡πÄ‡∏û‡∏¥‡πà‡∏° Docker repository
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
docker --version
docker compose version
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Configure Docker

```bash
# Start Docker service
sudo systemctl start docker
sudo systemctl enable docker

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Docker
sudo docker run hello-world
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏û‡∏¥‡πà‡∏° user ‡πÄ‡∏Ç‡πâ‡∏≤ docker group

```bash
sudo usermod -aG docker $USER

# Logout ‡πÅ‡∏•‡∏∞ login ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ú‡∏•
exit
# ssh ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏´‡∏°‡πà
```

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å login ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ sudo:
```bash
docker ps
```

---

## ‡∏Å‡∏≤‡∏£ Deploy Application

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Clone Repository

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö applications
mkdir -p ~/apps
cd ~/apps

# Clone repository
git clone https://github.com/somkheartk/yolo-api.git
cd yolo-api
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÇ‡∏°‡πÄ‡∏î‡∏•

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Pretrained Model (‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)**
```bash
# API ‡∏à‡∏∞ download YOLOv8n ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
# ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Upload Custom Model**

‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á local:
```bash
# Upload model ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á local ‡πÑ‡∏õ‡∏¢‡∏±‡∏á server
scp -P 2222 /path/to/your/model.pt yoloapi@YOUR_DROPLET_IP:~/apps/yolo-api/models/
```

‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å URL:
```bash
# ‡∏ö‡∏ô server
cd ~/apps/yolo-api/models
wget https://your-url.com/model.pt -O custom_model.pt
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Configuration

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `docker-compose.yml`:
```bash
vim docker-compose.yml
```

```yaml
services:
  yolo-api:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - ./models:/app/models
    environment:
      # ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç path ‡∏Ç‡∏≠‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•
      - MODEL_PATH=/app/models/yolov8n.pt
      # ‡∏´‡∏£‡∏∑‡∏≠ custom model
      # - MODEL_PATH=/app/models/custom_model.pt
    restart: unless-stopped
    # ‡πÄ‡∏û‡∏¥‡πà‡∏° resource limits
    deploy:
      resources:
        limits:
          memory: 2G
        reservations:
          memory: 1G
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Build ‡πÅ‡∏•‡∏∞ Run

```bash
# Build Docker image
docker compose build

# Run container
docker compose up -d

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
docker compose ps

# ‡∏î‡∏π logs
docker compose logs -f
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API

```bash
# Health check
curl http://localhost:8000/health

# Model info
curl http://localhost:8000/model-info
```

‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ response:
```json
{
  "status": "healthy",
  "model_loaded": true,
  "model_path": "/app/models/yolov8n.pt"
}
```

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Domain ‡πÅ‡∏•‡∏∞ SSL

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ DNS

‡πÑ‡∏õ‡∏ó‡∏µ‡πà domain registrar ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Namecheap, GoDaddy, etc.) ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° A record:

```
Type: A
Host: @ (‡∏´‡∏£‡∏∑‡∏≠ subdomain ‡πÄ‡∏ä‡πà‡∏ô api)
Value: YOUR_DROPLET_IP
TTL: Auto ‡∏´‡∏£‡∏∑‡∏≠ 300
```

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
- `yourdomain.com` ‚Üí `159.89.xxx.xxx`
- `api.yourdomain.com` ‚Üí `159.89.xxx.xxx`

‡∏£‡∏≠ DNS propagate (5-30 ‡∏ô‡∏≤‡∏ó‡∏µ)

‡∏ó‡∏î‡∏™‡∏≠‡∏ö:
```bash
nslookup yourdomain.com
# ‡∏´‡∏£‡∏∑‡∏≠
dig yourdomain.com
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Nginx

```bash
sudo apt install -y nginx
sudo systemctl start nginx
sudo systemctl enable nginx
```

‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ‡πÄ‡∏õ‡∏¥‡∏î browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `http://YOUR_DROPLET_IP` ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Welcome to Nginx

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Certbot (Let's Encrypt)

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Certbot
sudo apt install -y certbot python3-certbot-nginx
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏Ç‡∏≠ SSL Certificate

```bash
# ‡∏Ç‡∏≠ certificate ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö domain
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö subdomain
sudo certbot --nginx -d api.yourdomain.com
```

‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°:
1. Email: ‡πÉ‡∏™‡πà email ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
2. Terms of Service: `A` (Agree)
3. Share email: `N` (No)

Certbot ‡∏à‡∏∞:
- ‡∏Ç‡∏≠ certificate ‡∏à‡∏≤‡∏Å Let's Encrypt
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Nginx config ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- Redirect HTTP ‚Üí HTTPS

‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ‡πÄ‡∏õ‡∏¥‡∏î `https://yourdomain.com` ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô üîí

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto-renewal

```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö renewal
sudo certbot renew --dry-run

# Certbot ‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á cron job ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å:
sudo systemctl list-timers
```

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Nginx Reverse Proxy

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á Nginx Configuration

```bash
sudo vim /etc/nginx/sites-available/yolo-api
```

‡πÄ‡∏û‡∏¥‡πà‡∏° configuration:

```nginx
# Upstream definition
upstream yolo_api {
    server localhost:8000;
}

# HTTP - Redirect to HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name api.yourdomain.com;

    return 301 https://$server_name$request_uri;
}

# HTTPS
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name api.yourdomain.com;

    # SSL certificates (Certbot ‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
    ssl_certificate /etc/letsencrypt/live/api.yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.yourdomain.com/privkey.pem;
    
    # SSL configuration
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    
    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # Logging
    access_log /var/log/nginx/yolo-api-access.log;
    error_log /var/log/nginx/yolo-api-error.log;

    # Client body size (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö upload ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û)
    client_max_body_size 10M;

    # Timeouts
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;

    # Proxy settings
    location / {
        proxy_pass http://yolo_api;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocket support (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # Health check endpoint
    location /health {
        proxy_pass http://yolo_api/health;
        access_log off;
    }
}
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Enable Site

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á symbolic link
sudo ln -s /etc/nginx/sites-available/yolo-api /etc/nginx/sites-enabled/

# ‡∏•‡∏ö default site (optional)
sudo rm /etc/nginx/sites-enabled/default

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö configuration
sudo nginx -t

# Reload Nginx
sudo systemctl reload nginx
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

```bash
# ‡∏à‡∏≤‡∏Å server
curl https://api.yourdomain.com/health

# ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á local
curl https://api.yourdomain.com/health
```

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firewall

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Configure UFW (Uncomplicated Firewall)

```bash
# Reset firewall (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
sudo ufw --force reset

# Default policies
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Allow SSH (‡πÉ‡∏ä‡πâ port ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏ß‡πâ)
sudo ufw allow 2222/tcp comment 'SSH'

# Allow HTTP ‡πÅ‡∏•‡∏∞ HTTPS
sudo ufw allow 80/tcp comment 'HTTP'
sudo ufw allow 443/tcp comment 'HTTPS'

# Enable firewall
sudo ufw enable

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
sudo ufw status verbose
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Digital Ocean Firewall (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°)

‡πÉ‡∏ô Digital Ocean Console:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Networking** ‚Üí **Firewalls**
2. **Create Firewall**
3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Inbound Rules:
   ```
   Type        Protocol    Port Range    Sources
   SSH         TCP         2222          Your IP
   HTTP        TCP         80            All IPv4, All IPv6
   HTTPS       TCP         443           All IPv4, All IPv6
   ```
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Droplet ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ
5. **Create Firewall**

---

## Monitoring ‡πÅ‡∏•‡∏∞ Logging

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ System Monitoring

**Install monitoring tools:**
```bash
sudo apt install -y htop iotop nethogs
```

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö resources:**
```bash
# CPU ‡πÅ‡∏•‡∏∞ RAM
htop

# Disk usage
df -h

# Disk I/O
sudo iotop

# Network usage
sudo nethogs

# Docker stats
docker stats
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Application Logs

**Docker logs:**
```bash
# ‡∏î‡∏π logs ‡πÅ‡∏ö‡∏ö realtime
docker compose logs -f

# ‡∏î‡∏π logs ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 100 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
docker compose logs --tail=100

# ‡∏î‡∏π logs ‡∏Ç‡∏≠‡∏á specific container
docker logs yolo-api-yolo-api-1 -f
```

**Nginx logs:**
```bash
# Access logs
sudo tail -f /var/log/nginx/yolo-api-access.log

# Error logs
sudo tail -f /var/log/nginx/yolo-api-error.log
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Log Rotation

‡∏™‡∏£‡πâ‡∏≤‡∏á log rotation config:
```bash
sudo vim /etc/logrotate.d/yolo-api
```

```
/var/log/nginx/yolo-api-*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        [ -f /var/run/nginx.pid ] && kill -USR1 `cat /var/run/nginx.pid`
    endscript
}
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Setup Monitoring Script

‡∏™‡∏£‡πâ‡∏≤‡∏á monitoring script:
```bash
vim ~/monitor.sh
```

```bash
#!/bin/bash

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "=== YOLO API Health Monitor ==="
echo ""

# Check if API is running
API_STATUS=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/health)
if [ "$API_STATUS" = "200" ]; then
    echo -e "${GREEN}‚úì${NC} API is running (HTTP $API_STATUS)"
else
    echo -e "${RED}‚úó${NC} API is down (HTTP $API_STATUS)"
fi

# Check Docker container
CONTAINER_STATUS=$(docker inspect -f '{{.State.Status}}' yolo-api-yolo-api-1 2>/dev/null)
if [ "$CONTAINER_STATUS" = "running" ]; then
    echo -e "${GREEN}‚úì${NC} Docker container is running"
else
    echo -e "${RED}‚úó${NC} Docker container is not running"
fi

# Check disk space
DISK_USAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')
if [ "$DISK_USAGE" -lt 80 ]; then
    echo -e "${GREEN}‚úì${NC} Disk usage: ${DISK_USAGE}%"
else
    echo -e "${YELLOW}‚ö†${NC} Disk usage: ${DISK_USAGE}% (Warning: >80%)"
fi

# Check memory
MEM_USAGE=$(free | awk 'NR==2 {printf "%.0f", $3/$2*100}')
if [ "$MEM_USAGE" -lt 90 ]; then
    echo -e "${GREEN}‚úì${NC} Memory usage: ${MEM_USAGE}%"
else
    echo -e "${YELLOW}‚ö†${NC} Memory usage: ${MEM_USAGE}% (Warning: >90%)"
fi

echo ""
echo "Last 5 access logs:"
sudo tail -5 /var/log/nginx/yolo-api-access.log

echo ""
echo "==================================="
```

‡∏ó‡∏≥‡πÉ‡∏´‡πâ executable:
```bash
chmod +x ~/monitor.sh
```

‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
```bash
./monitor.sh
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: Setup Cron Job ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Monitoring

```bash
crontab -e
```

‡πÄ‡∏û‡∏¥‡πà‡∏°:
```
# Monitor API every 5 minutes
*/5 * * * * ~/monitor.sh >> ~/monitor.log 2>&1

# Restart if down (optional)
*/10 * * * * docker ps | grep yolo-api || docker compose -f ~/apps/yolo-api/docker-compose.yml up -d
```

---

## Backup ‡πÅ‡∏•‡∏∞ Recovery

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Manual Backup

**Backup ‡πÇ‡∏°‡πÄ‡∏î‡∏•:**
```bash
# Backup models
tar -czf ~/backups/models-$(date +%Y%m%d).tar.gz ~/apps/yolo-api/models/

# Download ‡∏à‡∏≤‡∏Å server ‡πÑ‡∏õ‡∏¢‡∏±‡∏á local
scp -P 2222 yoloapi@YOUR_DROPLET_IP:~/backups/models-*.tar.gz ./
```

**Backup configuration:**
```bash
# Backup configs
tar -czf ~/backups/configs-$(date +%Y%m%d).tar.gz \
    ~/apps/yolo-api/docker-compose.yml \
    /etc/nginx/sites-available/yolo-api
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Automated Backup Script

```bash
vim ~/backup.sh
```

```bash
#!/bin/bash

BACKUP_DIR=~/backups
DATE=$(date +%Y%m%d_%H%M%S)

# ‡∏™‡∏£‡πâ‡∏≤‡∏á backup directory
mkdir -p $BACKUP_DIR

# Backup models
echo "Backing up models..."
tar -czf $BACKUP_DIR/models-$DATE.tar.gz ~/apps/yolo-api/models/

# Backup configs
echo "Backing up configs..."
tar -czf $BACKUP_DIR/configs-$DATE.tar.gz \
    ~/apps/yolo-api/docker-compose.yml \
    /etc/nginx/sites-available/yolo-api

# ‡∏•‡∏ö backup ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô 7 ‡∏ß‡∏±‡∏ô
find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete

echo "Backup completed: $DATE"
```

```bash
chmod +x ~/backup.sh
```

‡∏ï‡∏±‡πâ‡∏á cron job:
```bash
crontab -e
```

‡πÄ‡∏û‡∏¥‡πà‡∏°:
```
# Daily backup at 2 AM
0 2 * * * ~/backup.sh >> ~/backup.log 2>&1
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Digital Ocean Snapshots

‡πÉ‡∏ô Digital Ocean Console:
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Droplet ‚Üí **Snapshots**
2. **Take Snapshot**
3. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô `yolo-api-before-update-2024-01-15`
4. ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ

**Automated Snapshots:**
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Droplet Settings ‚Üí **Backups**
- Enable Automated Backups (‡πÄ‡∏û‡∏¥‡πà‡∏° 20% ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ droplet)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Recovery Process

**Recovery ‡∏à‡∏≤‡∏Å backup:**
```bash
# 1. Stop container
cd ~/apps/yolo-api
docker compose down

# 2. Restore models
tar -xzf ~/backups/models-YYYYMMDD.tar.gz -C ~/

# 3. Restore configs
tar -xzf ~/backups/configs-YYYYMMDD.tar.gz -C ~/

# 4. Restart container
docker compose up -d
```

**Recovery ‡∏à‡∏≤‡∏Å snapshot:**
1. ‡πÉ‡∏ô Digital Ocean Console
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Droplet ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Snapshot
3. Update DNS record ‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà IP ‡πÉ‡∏´‡∏°‡πà

---

## Performance Tuning

### 1. Nginx Tuning

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `/etc/nginx/nginx.conf`:

```nginx
user www-data;
worker_processes auto;
worker_rlimit_nofile 65535;

events {
    worker_connections 4096;
    use epoll;
    multi_accept on;
}

http {
    # Basic Settings
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    server_tokens off;

    # Buffer Settings
    client_body_buffer_size 128k;
    client_max_body_size 10m;
    client_header_buffer_size 1k;
    large_client_header_buffers 4 4k;
    output_buffers 1 32k;
    postpone_output 1460;

    # Gzip Settings
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml text/javascript 
               application/json application/javascript application/xml+rss 
               application/rss+xml font/truetype font/opentype 
               application/vnd.ms-fontobject image/svg+xml;

    # Logging
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    # Include configs
    include /etc/nginx/mime.types;
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
```

Reload:
```bash
sudo nginx -t && sudo nginx -s reload
```

### 2. Docker Tuning

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `docker-compose.yml`:

```yaml
services:
  yolo-api:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - ./models:/app/models
    environment:
      - MODEL_PATH=/app/models/yolov8n.pt
    restart: unless-stopped
    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 3G
        reservations:
          cpus: '1'
          memory: 1G
    # Healthcheck
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
```

### 3. System Tuning

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `/etc/sysctl.conf`:

```bash
sudo vim /etc/sysctl.conf
```

‡πÄ‡∏û‡∏¥‡πà‡∏°:
```
# Network tuning
net.core.somaxconn = 65535
net.ipv4.tcp_max_syn_backlog = 65535
net.ipv4.ip_local_port_range = 1024 65535
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_fin_timeout = 15

# File descriptors
fs.file-max = 65535
```

Apply:
```bash
sudo sysctl -p
```

### 4. Model Optimization

**‡πÉ‡∏ä‡πâ ONNX ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production:**

```bash
# ‡∏ö‡∏ô server
cd ~/apps/yolo-api

# ‡∏™‡∏£‡πâ‡∏≤‡∏á script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö export ONNX
cat > export_onnx.py << 'EOF'
from ultralytics import YOLO

model = YOLO('models/yolov8n.pt')
model.export(format='onnx', dynamic=True, simplify=True)
print("Model exported to ONNX format")
EOF

# ‡∏£‡∏±‡∏ô export
docker run --rm -v $(pwd):/app -w /app python:3.10-slim bash -c "
  pip install ultralytics && python export_onnx.py
"

# Update docker-compose.yml ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ONNX model
# MODEL_PATH=/app/models/yolov8n.onnx
```

---

## Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: API ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
```bash
# 1. Container status
docker ps
docker compose logs

# 2. Port listening
sudo netstat -tlnp | grep 8000

# 3. Firewall
sudo ufw status
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```bash
# Restart container
docker compose restart

# ‡∏´‡∏£‡∏∑‡∏≠ rebuild
docker compose down
docker compose up -d --build
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Out of Memory

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
```bash
free -h
docker stats
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```bash
# 1. ‡πÄ‡∏û‡∏¥‡πà‡∏° swap
sudo fallocate -l 4G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# 2. ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î batch ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤
# 3. Upgrade droplet
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: SSL Certificate Error

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
```bash
sudo certbot certificates
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```bash
# Renew certificate
sudo certbot renew

# ‡∏´‡∏£‡∏∑‡∏≠ renew specific domain
sudo certbot renew --cert-name yourdomain.com
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Slow Response

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
```bash
# 1. CPU usage
htop

# 2. Network
ping yourdomain.com

# 3. API response time
curl -w "\nTime: %{time_total}s\n" http://localhost:8000/health
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡πÉ‡∏ä‡πâ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤ (YOLOv8n)
2. Export ‡πÄ‡∏õ‡πá‡∏ô ONNX/TensorRT
3. Upgrade droplet
4. ‡πÉ‡∏ä‡πâ CDN

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Disk Full

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
```bash
df -h
du -sh /var/log/*
du -sh ~/.cache/*
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```bash
# ‡∏•‡∏ö Docker images/containers ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ
docker system prune -a

# ‡∏•‡∏ö logs ‡πÄ‡∏Å‡πà‡∏≤
sudo find /var/log -type f -name "*.log" -mtime +30 -delete

# Rotate logs
sudo logrotate -f /etc/logrotate.conf
```

---

## ‡∏™‡∏£‡∏∏‡∏õ

‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ:
- ‚úÖ ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Digital Ocean Droplet
- ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker ‡πÅ‡∏•‡∏∞ dependencies
- ‚úÖ ‡∏Å‡∏≤‡∏£ deploy YOLO API
- ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ domain ‡πÅ‡∏•‡∏∞ SSL
- ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Nginx reverse proxy
- ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ firewall ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- ‚úÖ Monitoring ‡πÅ‡∏•‡∏∞ logging
- ‚úÖ Backup ‡πÅ‡∏•‡∏∞ recovery
- ‚úÖ Performance tuning
- ‚úÖ Troubleshooting

### Quick Reference Commands

```bash
# ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
docker compose ps
docker compose logs -f
./monitor.sh

# Restart API
docker compose restart

# Update code
cd ~/apps/yolo-api
git pull
docker compose up -d --build

# Backup
./backup.sh

# ‡∏î‡∏π logs
docker compose logs --tail=100
sudo tail -f /var/log/nginx/yolo-api-access.log

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö resources
htop
docker stats
df -h
```

### Next Steps

1. **Setup Monitoring**: ‡πÉ‡∏ä‡πâ tools ‡πÄ‡∏ä‡πà‡∏ô Grafana, Prometheus
2. **Load Balancing**: ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ traffic ‡∏™‡∏π‡∏á
3. **CI/CD**: Setup automated deployment
4. **Rate Limiting**: ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô requests
5. **API Authentication**: ‡πÄ‡∏û‡∏¥‡πà‡∏° API keys

---

## ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [Digital Ocean Documentation](https://docs.digitalocean.com)
- [Nginx Documentation](https://nginx.org/en/docs/)
- [Docker Documentation](https://docs.docker.com)
- [Let's Encrypt](https://letsencrypt.org/docs/)
- [YOLO API Development Guide](DEVELOPMENT.md)
